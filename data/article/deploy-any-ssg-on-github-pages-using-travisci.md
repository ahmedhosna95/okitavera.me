---
title: "Deploy any Static-site generator on github pages using TravisCI"
date: 2018-12-31
tags:
  - JAMstack
  - Travis
  - web-development
splash:
  url: "/assets/img/banners/unsplash-css-shot.jpg"
  credit: "Image: https://unsplash.com/photos/_yMciiStJyY"
---

I remember back in the day where everyone are learning php frameworks just for make a simple blog.
Yeah it's okay, but it was expensive considering you're just ended up scaling your money when your bandwidth limit is exceeded.
And then people using github pages for their blog because it's relatively easy and free.

With the help of jekyll or octopress, everyone can make their own personal webpages by just writing some markdown and then push it to their repo, and GitHub automagically transform it into a beautiful themed pages with jekyll.

## Problems

Everyone love customizing their stuff and trying a new technologies, so am I.
I want to try another static site generator (like this cute one - [eleventy](https://11ty.io)),
but also I still want to deploys it on my GitHub pages.
And as you know, GitHub (in the day where this article written;) is just supporting jekyll.

## TravisCI

Since jekyll is just a static site generator, which is transforming your stuff (templates, markdown, etc) into HTML,
we can do the same things by the help of TravisCI.
They also has a feature that allow us to automatically deploy files to many providers including GitHub Pages.

## Setting up repository

First of all, create a repository for your website, usually `[username].github.io`.
and then you should make a new branch for your source code, in this case, I create `dev` branch.

And now you can clone the `dev` branch and push your code to it.

"Wait, what happen with the `master` branch ?"

In this case, we use the `master` as the place where your files are generated and should be served automatically by GitHub.

## .travis.yml

In order to make our repository deployed by Travis, we need to add some instruction for travis in a file called `.travis.yml`.

Okay, let's create it.

```yaml
language: node_js
node_js:
  - "node"
install:
  - npm install # install eleventy and dependencies
script:
  - npx eleventy # run generator
deploy:
  provider: pages
  skip_cleanup: true
  github_token: $GH_TOKEN # Set in travis-ci.org dashboard later
  target_branch: master
  local_dir: _site # the generated folder that you want to push to the master
  keep-history: true
  on:
    branch: dev # branch name of the source code
```

In this case, I use [eleventy](https://11ty.io) as example, so as you can see, it run as nodejs project.
For more information about the languages that travis supported and the usages, you can visit https://docs.travis-ci.com/user/languages/

## travis setting

As you can see in the `.travis.yml` before, there is a yaml key named `github_token` and it has `$GH_TOKEN` as the value.
This token is used by travis to push the generated files into your `master` branch.
So it should be PRIVATE, DO NOT EVER PUT THE TOKEN DIRECTLY INTO YOUR `.travis.yml`.

In order to set that, you can use the "Environment Variables" in your travis repository settings (https://travis-ci.com/[username]/[repo-name]/settings). And don't forget to set it hidden from the build logs.

![deploy-ssg-travis-gh-token](/assets/img/articles/deploy-ssg-travis-gh-token.jpg)

To get your GitHub token, you can visit https://help.github.com/articles/creating-a-personal-access-token-for-the-command-line/.

After that, you can reload the build process.

![deploy-ssg-travis-build-process](/assets/img/articles/deploy-ssg-travis-build-process.jpg)

Build process done, lets check the `master` branch.

![deploy-ssg-travis-master-branch](/assets/img/articles/deploy-ssg-travis-master-branch.jpg)

Huuray, our code are now automatically generated by TravisCI everytimes we push the code into the `dev` branch!
